<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dev docs · ExplicitImports.jl</title><meta name="title" content="Dev docs · ExplicitImports.jl"/><meta property="og:title" content="Dev docs · ExplicitImports.jl"/><meta property="twitter:title" content="Dev docs · ExplicitImports.jl"/><meta name="description" content="Documentation for ExplicitImports.jl."/><meta property="og:description" content="Documentation for ExplicitImports.jl."/><meta property="twitter:description" content="Documentation for ExplicitImports.jl."/><meta property="og:url" content="https://JuliaTesting.github.io/ExplicitImports.jl/internals/"/><meta property="twitter:url" content="https://JuliaTesting.github.io/ExplicitImports.jl/internals/"/><link rel="canonical" href="https://JuliaTesting.github.io/ExplicitImports.jl/internals/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ExplicitImports.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../api/">API reference</a></li><li class="is-active"><a class="tocitem" href>Dev docs</a><ul class="internal"><li><a class="tocitem" href="#Implementation-strategy"><span>Implementation strategy</span></a></li><li><a class="tocitem" href="#Internals"><span>Internals</span></a></li><li><a class="tocitem" href="#How-to-debug-issues"><span>How to debug issues</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Dev docs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dev docs</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaTesting/ExplicitImports.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/main/docs/src/internals.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Internal-details"><a class="docs-heading-anchor" href="#Internal-details">Internal details</a><a id="Internal-details-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-details" title="Permalink"></a></h1><h2 id="Implementation-strategy"><a class="docs-heading-anchor" href="#Implementation-strategy">Implementation strategy</a><a id="Implementation-strategy-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-strategy" title="Permalink"></a></h2><ol><li>[DONE hackily] Figure out what names used in the module are being used to refer to bindings in global scope (as opposed to e.g. shadowing globals).<ul><li>We do this by parsing the code (thanks to JuliaSyntax), then reimplementing scoping rules on top of the parse tree</li><li>This is finicky, but assuming scoping doesn&#39;t change, should be robust enough (once the long tail of edge cases are dealt with...)<ul><li>Currently, I don&#39;t handle the <code>global</code> keyword, so those may look like local variables and confuse things</li></ul></li><li>This means we need access to the raw source code; <code>pathof</code> works well for packages, but for local modules one has to pass the path themselves. Also doesn&#39;t seem to work well for stdlibs in the sysimage</li></ul></li><li>[DONE] Figure out what implicit imports are available in the module, and which module they come from<ul><li>done, via a magic <code>ccall</code> from Discourse, and <code>Base.which</code>.</li></ul></li><li>[DONE] Figure out which names have been explicitly imported already<ul><li>Done via parsing</li></ul></li></ol><p>Then we can put this information together to figure out what names are actually being used from other modules, and whose usage could be made explicit, and also which existing explicit imports are not being used.</p><h2 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ExplicitImports.find_implicit_imports"><a class="docstring-binding" href="#ExplicitImports.find_implicit_imports"><code>ExplicitImports.find_implicit_imports</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">find_implicit_imports(mod::Module)</code></pre><p>Given a module <code>mod</code>, returns a <code>Dict{Symbol, @NamedTuple{source::Module,exporters::Vector{Module}}}</code> showing names exist in <code>mod</code>&#39;s namespace which are available due to implicit exports by other modules. The dict&#39;s keys are those names, and the values are the source module that the name comes from, along with the modules which export the same binding that are available in <code>mod</code> due to implicit imports.</p><p>In the case of ambiguities (two modules exporting the same name), the name is unavailable in the module, and hence the name will not be present in the dict.</p><p>This is powered by <code>Base.which</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/4787075b86a4cd1482dfe15010e6da1b62bd202d/src/find_implicit_imports.jl#L18-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ExplicitImports.get_names_used"><a class="docstring-binding" href="#ExplicitImports.get_names_used"><code>ExplicitImports.get_names_used</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_names_used(file) -&gt; FileAnalysis</code></pre><p>Figures out which global names are used in <code>file</code>, and what modules they are used within.</p><p>Traverses static <code>include</code> statements.</p><p>Returns a <code>FileAnalysis</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/4787075b86a4cd1482dfe15010e6da1b62bd202d/src/get_names_used.jl#L1153-L1161">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ExplicitImports.analyze_all_names"><a class="docstring-binding" href="#ExplicitImports.analyze_all_names"><code>ExplicitImports.analyze_all_names</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">analyze_all_names(file)</code></pre><p>Returns a tuple of two items:</p><ul><li><code>per_usage_info</code>: a table containing information about each name each time it was used</li><li><code>untainted_modules</code>: a set containing modules found and analyzed successfully</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/4787075b86a4cd1482dfe15010e6da1b62bd202d/src/get_names_used.jl#L889-L896">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ExplicitImports.inspect_session"><a class="docstring-binding" href="#ExplicitImports.inspect_session"><code>ExplicitImports.inspect_session</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ExplicitImports.inspect_session([io::IO=stdout,]; skip=(Base, Core), inner=print_explicit_imports)</code></pre><p>Experimental functionality to call <code>inner</code> (defaulting to <code>print_explicit_imports</code>) on each loaded package in the Julia session.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/4787075b86a4cd1482dfe15010e6da1b62bd202d/src/ExplicitImports.jl#L413-L417">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ExplicitImports.FileAnalysis"><a class="docstring-binding" href="#ExplicitImports.FileAnalysis"><code>ExplicitImports.FileAnalysis</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FileAnalysis</code></pre><p>Contains structured analysis results.</p><p><strong>Fields</strong></p><ul><li>per<em>usage</em>info::Vector{PerUsageInfo}</li><li><code>needs_explicit_import::Set{@NamedTuple{name::Symbol,module_path::Vector{Symbol},   location::String}}</code></li><li><code>unnecessary_explicit_import::Set{@NamedTuple{name::Symbol,module_path::Vector{Symbol},         location::String}}</code></li><li><code>untainted_modules::Set{Vector{Symbol}}</code>: those which were analyzed and do not contain an unanalyzable <code>include</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/4787075b86a4cd1482dfe15010e6da1b62bd202d/src/get_names_used.jl#L61-L74">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ExplicitImports.get_default_skip_pairs"><a class="docstring-binding" href="#ExplicitImports.get_default_skip_pairs"><code>ExplicitImports.get_default_skip_pairs</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_default_skip_pairs()</code></pre><p>Returns a tuple of module pairs: either <code>(Base =&gt; Core,)</code> is Compat.jl is not loaded, or <code>(Base =&gt; Core, Compat =&gt; Base, Compat =&gt; Core)</code> if it is.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ExplicitImports.jl/blob/4787075b86a4cd1482dfe15010e6da1b62bd202d/src/improper_explicit_imports.jl#L147-L151">source</a></section></details></article><h2 id="How-to-debug-issues"><a class="docs-heading-anchor" href="#How-to-debug-issues">How to debug issues</a><a id="How-to-debug-issues-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-debug-issues" title="Permalink"></a></h2><p>There are 2 sources of data used by ExplicitImports:</p><ul><li>static: read the file, parse the code with JuliaSyntax, then do some ad-hoc lowering to identify scoping and which names are being used<ul><li>the main function here is <a href="#ExplicitImports.get_names_used"><code>ExplicitImports.get_names_used</code></a></li></ul></li><li>dynamic: load the module, and get a list of names available in its namespace due to being exported by other modules<ul><li>this is done dynamically since we don&#39;t look at source code outside of the current project. (Potentially we could parse them too and do everything statically?).</li><li>this lets the Julia runtime tell us which names are being implicitly imported</li><li>this is done via <a href="#ExplicitImports.find_implicit_imports"><code>ExplicitImports.find_implicit_imports</code></a></li></ul></li></ul><p>We then reconcile these lists against each other to identify which implicit imports are used (and therefore could be converted into explicit imports), stale explicit imports, etc.</p><p>Most of the work here is done on the static side and most of the bugs are on the static side.</p><p>Let&#39;s say you think there is something going wrong there. The first step is to write a minimal reproducible example as a file, e.g. here <code>issue_129.jl</code>. Then we can learn what ExplicitImports thinks about every single identifier in the file via:</p><pre><code class="language-julia hljs">julia&gt; using ExplicitImports, DataFrames, PrettyTables

julia&gt; df = DataFrame(ExplicitImports.get_names_used(&quot;issue_129.jl&quot;).per_usage_info);

julia&gt; select!(df, Not(:scope_path)); # too verbose

julia&gt; open(&quot;table.md&quot;; write=true) do io
       PrettyTables.pretty_table(io, df; show_subheader=false, tf=PrettyTables.tf_markdown)
       end</code></pre><p>We can then use DataFrames manipulations to subset <code>df</code> to parts of interest etc. Usually we can then track down where a name has been misidentified and fix the relevant bit of code.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/">« API reference</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 15 January 2026 14:18">Thursday 15 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
